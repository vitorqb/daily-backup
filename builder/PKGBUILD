# Maintainer: Vitor Barbosa <vitorqb@gmail.com>
pkgname=daily-backup
pkgver=0.1.2
pkgrel=1
epoch=
pkgdesc="Daily backup utilities for vitor"
arch=(any)
url=""
license=('GPL')
groups=()
depends=("python3" "curl" "gnupg")
makedepends=()
checkdepends=()
optdepends=("backblaze-b2" "openssh")
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("https://f000.backblazeb2.com/file/daily-backup-releases/$pkgname-$pkgver.tar.gz")
noextract=()
md5sums=('8677f5d8da7c230e8594947b03ef1908')
validpgpkeys=()

package() {
    mkdir -p "$pkgdir/usr/bin/"
    mkdir -p "$pkgdir/etc/systemd/system/"

    cp "bash/daily-backup" "$pkgdir/usr/bin/daily-backup"
    chmod +x "$pkgdir/usr/bin/daily-backup"

    cp "bash/daily-backup-upload" "$pkgdir/usr/bin/daily-backup-upload"
    chmod +x "$pkgdir/usr/bin/daily-backup-upload"
    
    cp "bash/daily-backup-launch" "$pkgdir/usr/bin/daily-backup-launch"
    chmod +x "$pkgdir/usr/bin/daily-backup-launch"
    
    cp "bash/daily-backup-send-email" "$pkgdir/usr/bin/daily-backup-send-email"
    chmod +x "$pkgdir/usr/bin/daily-backup-send-email"
    
    cp "python/daily-backup-upload-backblaze-b2.py" "$pkgdir/usr/bin/daily-backup-upload-backblaze-b2.py"
    chmod +x "$pkgdir/usr/bin/daily-backup-upload-backblaze-b2.py"
    
    cp "systemctl/daily-backup.service" "$pkgdir/etc/systemd/system/daily-backup.service"
    cp "systemctl/daily-backup.timer" "$pkgdir/etc/systemd/system/daily-backup.timer"
}
